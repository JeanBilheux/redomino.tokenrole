<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      lang="en"
      metal:use-macro="here/main_template/macros/master"
      i18n:domain="redomino.tokenrole">

<metal:block fill-slot="top_slot"
             tal:define="dummy python:request.set('enable_border',1)" />

<body>
  <div metal:fill-slot="main" tal:define="here_url context/@@plone_context_state/object_url;">
    <h1 class="documentFirstHeading"
        i18n:translate="heading_tokenrole_manage">Token Role management</h1>

    <strong><a href="" tal:attributes="href string:$here_url/@@token_add" i18n:translate="new_token">New token</a>
    </strong>    

    <h2 i18n:translate="heading_tokenrolelisting">Token list</h2>
    
    <tal:define define="tokens_data view/tokens_data;">
        <tal:block tal:repeat="tokenid view/token_ids">
            <div tal:define="odd repeat/tokenid/odd;
                           oddeven python:odd and 'odd' or 'even'
                          " 
               tal:attributes="class string:token_list ${oddeven};">
                <h3 class="tileHeadline">
                    <a href=""
                       tal:define="token_url string:$here_url?token=$tokenid"
                       tal:attributes="href token_url" tal:content="token_url">url token</a>
                </h3>
                <div class="documentByLine">
                    <span i18n:translate="token_end_date">End date:</span>
                    <span tal:content="python:tokens_data[tokenid].get('token_end')">end date</span> <br />
                    <a href="" 
                       tal:attributes="href string:$here_url/@@token_edit?form.widgets.token_id=$tokenid"
                       i18n:translate="tokenrole_modify_token">
                        Modify</a>,
                    <a href="" 
                       tal:attributes="href string:$here_url/@@token_delete?form.widgets.token_id=$tokenid"
                           i18n:translate="tokenrole_delete_token">
                        Delete</a>,
                    <a href="" 
                       tal:attributes="href string:$here_url/@@token_send?form.widgets.token_id=$tokenid"
                           i18n:translate="tokenrole_send_token">
                        Distribute Token</a>
                </div>
            </div>
        </tal:block>
    </tal:define>
    
</div>
</body>
</html>
